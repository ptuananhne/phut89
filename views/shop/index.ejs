<%- include('../includes/head.ejs') %>

<% if (locals.banners && banners.length > 0) { %>
    <div class="slideshow-container">
        <% banners.forEach((banner, index) => { %>
            <div class="mySlides fade <%= index === 0 ? 'active' : '' %>">
                <a href="<%= banner.link %>"><img src="<%= banner.imageUrl %>" alt="<%= banner.title %>"></a>
            </div>
        <% }) %>
        <% if (banners.length > 1) { %>
            <a class="prev">❮</a>
            <a class="next">❯</a>
            <div class="dots-container">
                <% banners.forEach((banner, index) => { %>
                    <span class="dot <%= index === 0 ? 'active-dot' : '' %>"></span>
                <% }) %>
            </div>
        <% } %>
    </div>
<% } %>

<div class="page-title">
    <h1>Chào mừng đến với Phut89</h1>
</div>

<% if (featuredProducts && featuredProducts.length > 0) { %>
    <section class="category-showcase">
        <div class="category-showcase-header">
            <h2 class="section-title">Sản Phẩm Nổi Bật</h2>
        </div>
        <div class="product-carousel-container">
            <div class="product-carousel-wrapper">
                <div class="product-grid">
                    <% featuredProducts.forEach(product => { %>
                        <%- include('../includes/product-card.ejs', { product: product }) %>
                    <% }) %>
                </div>
            </div>
            <button class="carousel-nav-btn prev" aria-label="Previous Product">❮</button>
            <button class="carousel-nav-btn next" aria-label="Next Product">❯</button>
        </div>
    </section>
<% } %>

<% if (categories && categories.length > 0) { %>
    <% categories.forEach(category => { %>
        <% if (category.products && category.products.length > 0) { %>
            <section class="category-showcase">
                <div class="category-showcase-header">
                    <h2 class="section-title"><%= category.name %></h2>
                    <a href="/danh-muc/<%= category.slug %>" class="view-all-link">Xem tất cả <i class="fas fa-arrow-right"></i></a>
                </div>
                <div class="product-carousel-container">
                    <div class="product-carousel-wrapper">
                        <div class="product-grid">
                            <% category.products.forEach(product => { %>
                                <%- include('../includes/product-card.ejs', { product: product }) %>
                            <% }) %>
                        </div>
                    </div>
                    <button class="carousel-nav-btn prev" aria-label="Previous Product">❮</button>
                    <button class="carousel-nav-btn next" aria-label="Next Product">❯</button>
                </div>
            </section>
        <% } %>
    <% }) %>
<% } %>

<section class="map-section">
    <h2 class="section-title" style="text-align: center;">Hệ thống Cửa hàng Phut89</h2>
    <div class="map-tabs">
        <button class="map-tab-btn active" data-map="map1">Chi nhánh 1: 41B Lê Duẩn, BMT</button>
        <button class="map-tab-btn" data-map="map2">Chi nhánh 2: 323 Phan Chu Trinh, BMT</button>
    </div>
    <div class="map-content">
        <div id="map1" class="map-pane active">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3892.684959077661!2d108.0410607!3d12.6686496!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x31721d185f5a77a1%3A0xc7ccfe798e4d37a6!2zQ-G6p20gxJDhu5MgUGjDunQgODk!5e0!3m2!1svi!2s" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade" title="Bản đồ chi nhánh 1"></iframe>
        </div>
        <div id="map2" class="map-pane">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3290.111758933799!2d108.05111430806635!3d12.691476296416534!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3171f7d90106403f%3A0xcb0a19e88c19dd51!2zMzIzIFBoYW4gQ2h1IFRyaW5oLCBUw6NuIEzhu6NpLCBCdcO0biBNYSBUaHVvYywgxJDhuq9rIEzhuqdjIDYzMDAwMCwgVmlF4buHdCBOYW0!5e0!3m2!1svi!2s" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade" title="Bản đồ chi nhánh 2"></iframe>
        </div>
    </div>
</section>

<%- include('../includes/footer.ejs') %>
<%- include('../includes/end.ejs') %>
