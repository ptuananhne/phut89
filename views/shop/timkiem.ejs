<%- include('../includes/head.ejs') %>

<div class="page-title">
    <h1>Kết quả tìm kiếm</h1>
    <% if (searchQuery) { %>
        <p>Cho từ khóa: "<strong><%= searchQuery %></strong>"</p>
        <p class="results-count">Tìm thấy <%= totalProducts %> sản phẩm</p>
    <% } %>
</div>

<section class="product-grid">
    <% if (products.length > 0) { %>
        <% products.forEach(product => { %>
            <%- include('../includes/product-card.ejs', { product: product }) %>
        <% }) %>
    <% } else { %>
        <div class="no-results grid-full-width">
            <h2>Không tìm thấy sản phẩm nào</h2>
            <p>Rất tiếc, chúng tôi không tìm thấy sản phẩm nào khớp với từ khóa của bạn.</p>
        </div>
    <% } %>
</section>

<!-- Pagination -->
<% if (pagination && pagination.lastPage > 1) { %>
    <div class="pagination">
        <% if (pagination.hasPreviousPage) { %>
            <a href="<%= pagination.baseUrl %>&page=<%= pagination.previousPage %>" aria-label="Trang trước">‹</a>
        <% } %>
        <% for(let i = 1; i <= pagination.lastPage; i++) { %>
            <% if (i === pagination.currentPage) { %>
                <span class="active"><%= i %></span>
            <% } else { %>
                <a href="<%= pagination.baseUrl %>&page=<%= i %>"><%= i %></a>
            <% } %>
        <% } %>
        <% if (pagination.hasNextPage) { %>
            <a href="<%= pagination.baseUrl %>&page=<%= pagination.nextPage %>" aria-label="Trang sau">›</a>
        <% } %>
    </div>
<% } %>

<%- include('../includes/footer.ejs') %>
<%- include('../includes/end.ejs') %>
